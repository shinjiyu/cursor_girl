# Ortensia ç«¯åˆ°ç«¯æµ‹è¯•æŒ‡å—

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-11-03

---

## ğŸ“‹ æµ‹è¯•ç›®æ ‡

éªŒè¯å®Œæ•´çš„ Ortensia WebSocket åè®®ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

1. âœ… ä¸­å¤® Server å¯åŠ¨å’Œè¿è¡Œ
2. âœ… Cursor Hook (V8) è¿æ¥å’Œæ³¨å†Œ
3. âœ… Command Client è¿æ¥å’Œå‘½ä»¤å‘é€
4. âœ… Composer å‘½ä»¤æ‰§è¡Œï¼ˆè¾“å…¥æç¤ºè¯ï¼‰
5. âœ… äº‹ä»¶é€šçŸ¥æµè½¬
6. âœ… å¤šå®¢æˆ·ç«¯ååŒå·¥ä½œ

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ä¸­å¤® Server (bridge/websocket_server.py)           â”‚
â”‚              ws://localhost:8765                           â”‚
â”‚                                                            â”‚
â”‚  - å®¢æˆ·ç«¯æ³¨å†Œç®¡ç†                                           â”‚
â”‚  - æ¶ˆæ¯è·¯ç”±                                                 â”‚
â”‚  - äº‹ä»¶å¹¿æ’­                                                 â”‚
â”‚  - å¿ƒè·³æ£€æµ‹                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚                  â”‚
           â”‚                 â”‚                  â”‚
           v                 v                  v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Cursor Hook â”‚   â”‚  Command    â”‚   â”‚  AITuber    â”‚
    â”‚    (V8)     â”‚   â”‚   Client    â”‚   â”‚   Client    â”‚
    â”‚             â”‚   â”‚             â”‚   â”‚  (Optional)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Cursor    â”‚
    â”‚  Composer   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ æµ‹è¯•å‰å‡†å¤‡

### 1. ç¡®è®¤æ–‡ä»¶å®Œæ•´æ€§

```bash
cd "/Users/user/Documents/ cursorgirl"

# æ£€æŸ¥åè®®æ–‡ä»¶
ls -l bridge/protocol.py
ls -l docs/WEBSOCKET_PROTOCOL.md

# æ£€æŸ¥æœåŠ¡å™¨æ–‡ä»¶
ls -l bridge/websocket_server.py
ls -l bridge/test_server.py

# æ£€æŸ¥ Cursor Hook
ls -l cursor-injector/install-v8.sh

# æ£€æŸ¥ç¤ºä¾‹å®¢æˆ·ç«¯
ls -l examples/command_client_example.py
```

### 2. æ£€æŸ¥ Python ç¯å¢ƒ

```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python3 --version  # åº”è¯¥æ˜¯ 3.9+

# æ£€æŸ¥ websockets åº“
python3 -c "import websockets; print(websockets.__version__)"

# å¦‚æœç¼ºå°‘ï¼Œå®‰è£…
pip3 install websockets
```

### 3. æ£€æŸ¥ Cursor çŠ¶æ€

```bash
# å¦‚æœ Cursor æ­£åœ¨è¿è¡Œï¼Œå®Œå…¨é€€å‡º
# Cmd+Q

# æ£€æŸ¥æ˜¯å¦æœ‰æ®‹ç•™è¿›ç¨‹
ps aux | grep Cursor
```

---

## ğŸ“ æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1: éªŒè¯ä¸­å¤® Server åŸºæœ¬åŠŸèƒ½

**ç›®æ ‡**: ç¡®è®¤ Server èƒ½å¤Ÿå¯åŠ¨å¹¶å¤„ç†åŸºæœ¬æ¶ˆæ¯

#### æ­¥éª¤ 1.1: å¯åŠ¨ä¸­å¤® Server

æ‰“å¼€ **ç»ˆç«¯ 1**:

```bash
cd "/Users/user/Documents/ cursorgirl/bridge"
python3 websocket_server.py
```

**é¢„æœŸè¾“å‡º**:

```
======================================================================
  ğŸŒ¸ Ortensia ä¸­å¤® WebSocket Server v2.0
======================================================================

æœåŠ¡å™¨é…ç½®:
  - åœ°å€: ws://localhost:8765
  - åè®®: Ortensia Protocol v1 + æ—§åè®®å…¼å®¹
  - æ”¯æŒå®¢æˆ·ç«¯:
    â€¢ Cursor Hook
    â€¢ Command Client
    â€¢ AITuber Client (æ–°/æ—§)

======================================================================

âœ… WebSocket æœåŠ¡å™¨å·²å¯åŠ¨: ws://localhost:8765

ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...
æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨
```

#### æ­¥éª¤ 1.2: æµ‹è¯• Server è¿æ¥

æ‰“å¼€ **ç»ˆç«¯ 2**:

```bash
cd "/Users/user/Documents/ cursorgirl/bridge"
python3 test_server.py
```

**é¢„æœŸè¾“å‡º**:

```
======================================================================
  ğŸ§ª æµ‹è¯•ä¸­å¤® WebSocket Server
======================================================================

ğŸ“¡ è¿æ¥åˆ° ws://localhost:8765...
âœ… è¿æ¥æˆåŠŸ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æµ‹è¯• 1: æ³¨å†Œä¸º Command Client
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¤ æ³¨å†Œæ¶ˆæ¯å·²å‘é€
ğŸ“¨ æ”¶åˆ°å“åº”: register_ack
âœ… æ³¨å†ŒæˆåŠŸ: test-cc-001
   æœåŠ¡å™¨ä¿¡æ¯: {'version': '2.0', 'supported_protocols': ['v1'], 'server_time': ...}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æµ‹è¯• 2: å¿ƒè·³
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¤ å¿ƒè·³æ¶ˆæ¯å·²å‘é€
âœ… æ”¶åˆ°å¿ƒè·³å“åº”
   æœåŠ¡å™¨æ—¶é—´: ...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æµ‹è¯• 3: å‘é€å‘½ä»¤åˆ°ä¸å­˜åœ¨çš„ Cursor
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¤ å‘½ä»¤å·²å‘é€åˆ° cursor-nonexistent
âœ… æ­£ç¡®æ”¶åˆ°é”™è¯¯å“åº”
   é”™è¯¯ä¿¡æ¯: ç›®æ ‡å®¢æˆ·ç«¯ä¸å­˜åœ¨: cursor-nonexistent

======================================================================
  âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
======================================================================
```

**åœ¨ç»ˆç«¯ 1 (Server) åº”è¯¥çœ‹åˆ°**:

```
[INFO] âœ… æ–°è¿æ¥: ('127.0.0.1', XXXXX)
[INFO] ğŸ“ æ³¨å†Œå®¢æˆ·ç«¯: test-cc-001 (command_client)
[INFO] âœ… [test-cc-001] æ³¨å†ŒæˆåŠŸ: command_client
[INFO] ğŸ“¨ [test-cc-001] heartbeat
[INFO] ğŸ“¨ [test-cc-001] composer_send_prompt
[INFO] âš ï¸  ç›®æ ‡å®¢æˆ·ç«¯ä¸å­˜åœ¨: cursor-nonexistent
[INFO] ğŸ”Œ è¿æ¥å…³é—­: ('127.0.0.1', XXXXX)
[INFO] ğŸ“¤ æ³¨é”€å®¢æˆ·ç«¯: test-cc-001 (command_client)
```

âœ… **æµ‹è¯• 1 å®Œæˆ** - ä¸­å¤® Server åŸºæœ¬åŠŸèƒ½æ­£å¸¸

---

### æµ‹è¯• 2: Cursor Hook (V8) è¿æ¥æµ‹è¯•

**ç›®æ ‡**: éªŒè¯ Cursor èƒ½å¤Ÿè¿æ¥åˆ°ä¸­å¤® Server

#### æ­¥éª¤ 2.1: å®‰è£… Cursor Hook V8

**ç»ˆç«¯ 3**:

```bash
cd "/Users/user/Documents/ cursorgirl/cursor-injector"
./install-v8.sh
```

**é¢„æœŸè¾“å‡º**:

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  âœ… V8 å·²æ³¨å…¥ - æœ¬åœ°Server + ä¸­å¤®Server Client
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

V8 æ–°åŠŸèƒ½:
  âœ… æœ¬åœ° WebSocket Server (ç«¯å£ 9876) - ç”¨äºå¼€å‘è°ƒè¯•
  âœ… ä½œä¸º Client è¿æ¥åˆ°ä¸­å¤®Server - ç”¨äºç”Ÿäº§ç¯å¢ƒ
  âœ… æ”¯æŒ Composer æ“ä½œ (å‘é€æç¤ºè¯ã€æŸ¥è¯¢çŠ¶æ€)
  âœ… è‡ªåŠ¨æ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶
  âœ… è‡ªåŠ¨é‡è¿ï¼ˆæŒ‡æ•°é€€é¿ï¼‰

ä½¿ç”¨æ–¹å¼:
  å¼€å‘æ¨¡å¼: æ— éœ€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç›´æ¥ä½¿ç”¨ test-input-complete.py
  ç”Ÿäº§æ¨¡å¼: export ORTENSIA_SERVER=ws://localhost:8765
```

#### æ­¥éª¤ 2.2: è®¾ç½®ç¯å¢ƒå˜é‡

**ç»ˆç«¯ 3**:

```bash
export ORTENSIA_SERVER=ws://localhost:8765
echo $ORTENSIA_SERVER  # éªŒè¯
```

#### æ­¥éª¤ 2.3: å¯åŠ¨ Cursor

```bash
# å®Œå…¨é€€å‡º Cursor (Cmd+Q)
# ç„¶åé‡æ–°æ‰“å¼€ Cursor

# ç­‰å¾… 10 ç§’
sleep 10

# æŸ¥çœ‹æ—¥å¿—
cat /tmp/cursor_ortensia.log
```

**é¢„æœŸæ—¥å¿—å†…å®¹**:

```
[2025-11-03T...] [PID:XXXXX] ========================================
[2025-11-03T...] [PID:XXXXX] ğŸ‰ Ortensia V8 å¯åŠ¨ä¸­...
[2025-11-03T...] [PID:XXXXX] è¿›ç¨‹ ID: XXXXX
[2025-11-03T...] [PID:XXXXX] â±ï¸  ç­‰å¾…å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...
[2025-11-03T...] [PID:XXXXX] âœ… WebSocket æ¨¡å—åŠ è½½æˆåŠŸ
[2025-11-03T...] [PID:XXXXX] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[2025-11-03T...] [PID:XXXXX]   âœ… æœ¬åœ° WebSocket Server å¯åŠ¨æˆåŠŸï¼
[2025-11-03T...] [PID:XXXXX]   ğŸ“ ç«¯å£: 9876
[2025-11-03T...] [PID:XXXXX] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[2025-11-03T...] [PID:XXXXX] ğŸ”— [ä¸­å¤®] å°è¯•è¿æ¥åˆ° ws://localhost:8765...
[2025-11-03T...] [PID:XXXXX] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[2025-11-03T...] [PID:XXXXX]   âœ… å·²è¿æ¥åˆ°ä¸­å¤®Serverï¼
[2025-11-03T...] [PID:XXXXX]   ğŸ”‘ Cursor ID: cursor-XXXXXXXXX
[2025-11-03T...] [PID:XXXXX] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**åœ¨ç»ˆç«¯ 1 (Server) åº”è¯¥çœ‹åˆ°**:

```
[INFO] âœ… æ–°è¿æ¥: ('127.0.0.1', XXXXX)
[INFO] ğŸ“¨ [temp-XXXXX] register
[INFO] ğŸ“ æ³¨å†Œå®¢æˆ·ç«¯: cursor-XXXXXXXXX (cursor_hook)
[INFO] âœ… [cursor-XXXXXXXXX] æ³¨å†ŒæˆåŠŸ: cursor_hook
[INFO] ğŸ“Š å½“å‰è¿æ¥: {'cursor_hook': 1}
```

âœ… **æµ‹è¯• 2 å®Œæˆ** - Cursor Hook æˆåŠŸè¿æ¥åˆ°ä¸­å¤® Server

---

### æµ‹è¯• 3: Command Client å‘é€å‘½ä»¤

**ç›®æ ‡**: éªŒè¯å®Œæ•´çš„å‘½ä»¤æµç¨‹

#### æ­¥éª¤ 3.1: è¿è¡Œ Command Client ç¤ºä¾‹

**ç»ˆç«¯ 4**:

```bash
cd "/Users/user/Documents/ cursorgirl"
python3 examples/command_client_example.py
```

**é¢„æœŸè¾“å‡º**:

```
======================================================================
  ğŸ® Ortensia Command Client ç¤ºä¾‹
======================================================================

æ­¤ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•:
  1. è¿æ¥åˆ°ä¸­å¤®Server
  2. æ³¨å†Œä¸º Command Client
  3. ç›‘å¬äº‹ä»¶é€šçŸ¥
  4. å‘é€å‘½ä»¤åˆ° Cursor
  5. æ¥æ”¶å¹¶å¤„ç†å“åº”

======================================================================

ä¸­å¤®Serveråœ°å€: ws://localhost:8765

ğŸ”— è¿æ¥åˆ°ä¸­å¤®Server: ws://localhost:8765
âœ… å·²è¿æ¥

ğŸ“ æ³¨å†Œä¸º Command Client (ID: cc-001)
âœ… æ³¨å†Œæ¶ˆæ¯å·²å‘é€

ğŸ‘‚ å¼€å§‹ç›‘å¬æ¶ˆæ¯...

ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯: register_ack
   âœ… æ³¨å†ŒæˆåŠŸï¼
   ğŸ”‘ åˆ†é…ID: cc-001

======================================================================
  ğŸ¤– å¼€å§‹è‡ªåŠ¨åŒ–æ¼”ç¤º
======================================================================

â³ ç­‰å¾… Cursor å®ä¾‹è¿æ¥...
âœ… æ‰¾åˆ° Cursor å®ä¾‹: cursor-XXXXXXXXX

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æ¼”ç¤º 1: å‘é€æç¤ºè¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¬ å‘é€æç¤ºè¯åˆ° cursor-XXXXXXXXX:
   "å†™ä¸€ä¸ª Python å‡½æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ n é¡¹"
   âœ… å·²å‘é€

ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯: composer_send_prompt_result
   âœ… [cursor-XXXXXXXXX] æç¤ºè¯å·²å‘é€
      æ¶ˆæ¯: æç¤ºè¯å·²è¾“å…¥

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æ¼”ç¤º 2: æŸ¥è¯¢ Agent çŠ¶æ€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š æŸ¥è¯¢ cursor-XXXXXXXXX çš„ Agent çŠ¶æ€
   âœ… æŸ¥è¯¢å·²å‘é€

ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯: composer_status_result
   ğŸ“Š [cursor-XXXXXXXXX] Agent çŠ¶æ€: idle

...
```

#### æ­¥éª¤ 3.2: éªŒè¯ Cursor è¾“å…¥æ¡†

**åœ¨ Cursor çª—å£ä¸­**:

1. æ‰“å¼€ AI èŠå¤©é¢æ¿
2. æ£€æŸ¥è¾“å…¥æ¡†æ˜¯å¦æ˜¾ç¤ºäº†æç¤ºè¯:
   ```
   å†™ä¸€ä¸ª Python å‡½æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ n é¡¹
   ```

âœ… **æµ‹è¯• 3 å®Œæˆ** - å‘½ä»¤æˆåŠŸä» Command Client â†’ Server â†’ Cursor Hook â†’ Cursor UI

---

### æµ‹è¯• 4: æœ¬åœ°è°ƒè¯•æ¨¡å¼ï¼ˆå¯é€‰ï¼‰

**ç›®æ ‡**: éªŒè¯ V8 çš„æœ¬åœ° Server ä»ç„¶å·¥ä½œ

#### æ­¥éª¤ 4.1: æµ‹è¯•æœ¬åœ°è¿æ¥

**ç»ˆç«¯ 5** (ä¸éœ€è¦ä¸­å¤®Serverè¿è¡Œ):

```bash
cd "/Users/user/Documents/ cursorgirl/cursor-injector"
python3 test-input-complete.py "æœ¬åœ°è°ƒè¯•æµ‹è¯•"
```

**é¢„æœŸè¾“å‡º**:

```
ğŸ”— è¿æ¥åˆ° Cursor...
âœ… å·²è¿æ¥

æ­¥éª¤ 1: è¾“å…¥æ–‡å­—...
âœ… è¾“å…¥å‘½ä»¤æ‰§è¡ŒæˆåŠŸ

æ­¥éª¤ 2: ç­‰å¾…ç¼–è¾‘å™¨æ›´æ–°...
âœ… ç­‰å¾…å®Œæˆ

æ­¥éª¤ 3: éªŒè¯å†…å®¹...
âœ… è¾“å…¥æ¡†çŠ¶æ€:
   innerText: "æœ¬åœ°è°ƒè¯•æµ‹è¯•"
   ...
   âœ… å†…å®¹åŒ¹é…ï¼è¾“å…¥æˆåŠŸï¼
```

âœ… **æµ‹è¯• 4 å®Œæˆ** - æœ¬åœ° Server ä»ç„¶æ­£å¸¸å·¥ä½œ

---

## ğŸ“Š æµ‹è¯•æ£€æŸ¥æ¸…å•

### ä¸­å¤® Server

- [ ] Server æˆåŠŸå¯åŠ¨
- [ ] æ˜¾ç¤ºæ­£ç¡®çš„ç«¯å£ (8765)
- [ ] æµ‹è¯•è„šæœ¬å…¨éƒ¨é€šè¿‡
- [ ] å®¢æˆ·ç«¯è¿æ¥æ—¶æœ‰æ­£ç¡®æ—¥å¿—
- [ ] å®¢æˆ·ç«¯æ–­å¼€æ—¶æ­£ç¡®æ¸…ç†

### Cursor Hook (V8)

- [ ] å®‰è£…æˆåŠŸ
- [ ] æœ¬åœ° Server (9876) å¯åŠ¨
- [ ] è¿æ¥åˆ°ä¸­å¤®ServeræˆåŠŸ
- [ ] æ³¨å†Œæ¶ˆæ¯å‘é€æˆåŠŸ
- [ ] æ”¶åˆ°æ³¨å†Œç¡®è®¤
- [ ] å¿ƒè·³æ­£å¸¸å‘é€ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰

### Command Client

- [ ] è¿æ¥æˆåŠŸ
- [ ] æ³¨å†ŒæˆåŠŸ
- [ ] å‘é€å‘½ä»¤æˆåŠŸ
- [ ] æ”¶åˆ°å“åº”
- [ ] äº‹ä»¶ç›‘å¬æ­£å¸¸

### Composer æ“ä½œ

- [ ] æç¤ºè¯æˆåŠŸè¾“å…¥åˆ° Cursor
- [ ] è¾“å…¥æ¡†æ˜¾ç¤ºæ­£ç¡®æ–‡å­—
- [ ] æ”¯æŒä¸­æ–‡å’Œ Emoji

### æœ¬åœ°è°ƒè¯•

- [ ] æœ¬åœ°æ¨¡å¼ä»ç„¶å·¥ä½œ
- [ ] test-input-complete.py æ­£å¸¸
- [ ] ä¸å½±å“ç°æœ‰å·¥å…·

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1: Server å¯åŠ¨å¤±è´¥

**é”™è¯¯**: `Address already in use`

**åŸå› **: ç«¯å£ 8765 è¢«å ç”¨

**è§£å†³**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8765

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

### é—®é¢˜ 2: Cursor æ— æ³•è¿æ¥

**æ£€æŸ¥é¡¹**:

1. ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®
   ```bash
   echo $ORTENSIA_SERVER
   ```

2. æŸ¥çœ‹ Cursor æ—¥å¿—
   ```bash
   tail -50 /tmp/cursor_ortensia.log
   ```

3. æ£€æŸ¥ Server æ˜¯å¦è¿è¡Œ
   ```bash
   lsof -i :8765
   ```

4. æ£€æŸ¥ç½‘ç»œè¿æ¥
   ```bash
   curl -v ws://localhost:8765
   ```

### é—®é¢˜ 3: æç¤ºè¯æœªè¾“å…¥

**å¯èƒ½åŸå› **:

1. **è¾“å…¥æ¡†æœªæ‰¾åˆ°** - Cursor UI æ›´æ–°ï¼ŒDOM ç»“æ„å˜åŒ–
2. **JavaScript æ‰§è¡Œå¤±è´¥** - æŸ¥çœ‹ Cursor DevTools Console
3. **å‘½ä»¤æœªåˆ°è¾¾** - æŸ¥çœ‹ Server æ—¥å¿—

**è°ƒè¯•æ­¥éª¤**:

1. æŸ¥çœ‹ Cursor æ—¥å¿—:
   ```bash
   grep "Composer" /tmp/cursor_ortensia.log
   ```

2. æ‰‹åŠ¨æµ‹è¯•è¾“å…¥:
   ```bash
   python3 cursor-injector/test-input-complete.py "æ‰‹åŠ¨æµ‹è¯•"
   ```

3. æ£€æŸ¥ Server æ¶ˆæ¯è·¯ç”±:
   - Server æ—¥å¿—åº”æ˜¾ç¤ºæ¶ˆæ¯è·¯ç”±
   - æ£€æŸ¥ cursor_id æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 4: Command Client æ— å“åº”

**æ£€æŸ¥é¡¹**:

1. Server æ˜¯å¦è¿è¡Œ
2. æ³¨å†Œæ˜¯å¦æˆåŠŸ
3. Cursor æ˜¯å¦è¿æ¥

**è°ƒè¯•**:
```bash
# æŸ¥çœ‹ Server è¿æ¥æ•°
# åœ¨ Server æ—¥å¿—ä¸­æŸ¥æ‰¾ "å½“å‰è¿æ¥"
```

---

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### å»¶è¿Ÿæµ‹è¯•

æµ‹é‡æ¶ˆæ¯ä» Command Client åˆ° Cursor çš„ç«¯åˆ°ç«¯å»¶è¿Ÿ:

1. Command Client å‘é€å‘½ä»¤
2. è®°å½•æ—¶é—´æˆ³
3. Cursor Hook æ”¶åˆ°å‘½ä»¤
4. è®°å½•æ—¶é—´æˆ³
5. è®¡ç®—å·®å€¼

**é¢„æœŸ**: < 100ms (æœ¬åœ°)

### å¹¶å‘æµ‹è¯•

æµ‹è¯•å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥:

```python
# åˆ›å»º 10 ä¸ª Command Client
# åŒæ—¶å‘é€å‘½ä»¤
# éªŒè¯æ‰€æœ‰å‘½ä»¤éƒ½æ­£ç¡®è·¯ç”±
```

### ç¨³å®šæ€§æµ‹è¯•

é•¿æ—¶é—´è¿è¡Œæµ‹è¯•:

```bash
# è¿è¡Œ Server 24 å°æ—¶
# å®šæœŸå‘é€å¿ƒè·³
# æ£€æŸ¥å†…å­˜æ³„æ¼
# éªŒè¯é‡è¿æœºåˆ¶
```

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## Ortensia ç«¯åˆ°ç«¯æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸ**: YYYY-MM-DD  
**æµ‹è¯•äººå‘˜**: XXX  
**æµ‹è¯•ç¯å¢ƒ**:
- OS: macOS XX.X
- Python: X.X.X
- Cursor: X.X.X

### æµ‹è¯•ç»“æœ

| æµ‹è¯•é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| ä¸­å¤® Server å¯åŠ¨ | âœ…/âŒ | |
| Cursor Hook è¿æ¥ | âœ…/âŒ | |
| Command Client è¿æ¥ | âœ…/âŒ | |
| æç¤ºè¯è¾“å…¥ | âœ…/âŒ | |
| äº‹ä»¶å¹¿æ’­ | âœ…/âŒ | |
| æœ¬åœ°æ¨¡å¼ | âœ…/âŒ | |

### é—®é¢˜å’Œå»ºè®®

1. ...
2. ...

### æ€§èƒ½æŒ‡æ ‡

- å¹³å‡å»¶è¿Ÿ: XX ms
- æœ€å¤§å¹¶å‘: XX å®¢æˆ·ç«¯
- ç¨³å®šè¿è¡Œ: XX å°æ—¶

```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

å®Œæˆç«¯åˆ°ç«¯æµ‹è¯•å:

1. [ ] æ€§èƒ½ä¼˜åŒ–
2. [ ] æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
3. [ ] CI/CD é›†æˆ
4. [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‡†å¤‡
5. [ ] ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

---

*æœ€åæ›´æ–°: 2025-11-03*

