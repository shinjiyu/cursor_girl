# æ¦‚å¿µç¼–è¯‘å™¨ä¸å·¥å…·é“¾è®¾è®¡æ–¹æ¡ˆ

> **è®¾è®¡æ—¶é—´**: 2025-11-12  
> **çŠ¶æ€**: è®¾è®¡é˜¶æ®µ (æœªå®ç°)  
> **ä¼˜å…ˆçº§**: ä¸­æœŸä¼˜åŒ–  

---

## ğŸ“‹ ç›®å½•

- [èƒŒæ™¯ä¸åŠ¨æœº](#èƒŒæ™¯ä¸åŠ¨æœº)
- [æ ¸å¿ƒé—®é¢˜](#æ ¸å¿ƒé—®é¢˜)
- [è®¾è®¡æ–¹æ¡ˆ](#è®¾è®¡æ–¹æ¡ˆ)
- [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
- [å®æ–½è·¯å¾„](#å®æ–½è·¯å¾„)
- [å‚è€ƒæ–¹æ¡ˆ](#å‚è€ƒæ–¹æ¡ˆ)

---

## èƒŒæ™¯ä¸åŠ¨æœº

### å½“å‰çŠ¶æ€

Persona æ¦‚å¿µç³»ç»Ÿç›®å‰ä½¿ç”¨ JSON Schema å®šä¹‰æ¦‚å¿µï¼š

```json
{
  "name": "cursor_state",
  "type": "object",
  "properties": {
    "agent_status": {"type": "string"},
    "open_files": {"type": "array", "items": {"type": "string"}}
  }
}
```

**å­˜åœ¨çš„é—®é¢˜**ï¼š
- âŒ è¿è¡Œæ—¶éªŒè¯ - é”™è¯¯åœ¨æ‰§è¡Œæ—¶æ‰å‘ç°
- âŒ å¼±ç±»å‹æç¤º - IDE æ”¯æŒæœ‰é™
- âŒ æ— ä¾èµ–ç®¡ç† - æ¦‚å¿µå®šä¹‰åˆ†æ•£ï¼Œéš¾ä»¥å¤ç”¨
- âŒ æ— ç‰ˆæœ¬æ§åˆ¶ - æ¥å£å˜æ›´éš¾ä»¥ç®¡ç†
- âŒ æ‰‹åŠ¨ç»´æŠ¤ç±»å‹ - å®šä¹‰å’Œä»£ç ç±»å‹ä¸åŒæ­¥
- âŒ å¤æ‚ç»“æ„éš¾æè¿° - åµŒå¥—å¯¹è±¡ã€è”åˆç±»å‹è¡¨è¾¾åŠ›å¼±

### è®¾è®¡ç›®æ ‡

å€Ÿé‰´ **Protobuf å·¥å…·é“¾æ€æƒ³**ï¼Œæ„å»ºå®Œæ•´çš„æ¦‚å¿µå®šä¹‰è¯­è¨€ï¼ˆCDLï¼‰å’Œç¼–è¯‘å™¨ï¼š

```
âœ… ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ - å¼€å‘é˜¶æ®µå°±å‘ç°é”™è¯¯
âœ… å¼ºç±»å‹æ”¯æŒ - IDE å®Œæ•´è¡¥å…¨ã€è·³è½¬ã€é‡æ„
âœ… æ¨¡å—åŒ– - import æœºåˆ¶ï¼Œæ¦‚å¿µå¯å¤ç”¨
âœ… ç‰ˆæœ¬ç®¡ç† - æ¥å£å³å¥‘çº¦ï¼Œå…¼å®¹æ€§æ£€æŸ¥
âœ… è‡ªåŠ¨ç”Ÿæˆä»£ç  - å®šä¹‰ä¸å®ç°è‡ªåŠ¨åŒæ­¥
âœ… å¤æ‚ç»“æ„æ”¯æŒ - æšä¸¾ã€åµŒå¥—ã€è”åˆç±»å‹
```

---

## æ ¸å¿ƒé—®é¢˜

### 1. ç±»å‹å®‰å…¨

**ç°çŠ¶**ï¼š
```python
# è¿è¡Œæ—¶æ‰çŸ¥é“é”™è¯¯
concepts['cursor_state']['open_fils'][0]  # æ‹¼å†™é”™è¯¯ï¼è¿è¡Œæ—¶å´©æºƒ
```

**æœŸæœ›**ï¼š
```python
# ç¼–è¯‘æ—¶å°±å‘ç°é”™è¯¯
concepts.cursor_state.open_files[0].path
              â†‘           â†‘
        IDE è‡ªåŠ¨è¡¥å…¨ã€ç±»å‹æ£€æŸ¥
```

### 2. å¤æ‚ç»“æ„è¡¨è¾¾

**ç°çŠ¶**ï¼šJSON Schema å¯¹å¤æ‚ç»“æ„æ”¯æŒæœ‰é™

**æœŸæœ›**ï¼š
```protobuf
// ç±» Protobuf è¯­æ³•
enum TaskStatus {
    IDLE = 0;
    RUNNING = 1;
    COMPLETED = 2;
}

concept CursorState {
    TaskStatus status;
    repeated FileInfo open_files;  // æ•°ç»„
    optional string workspace;      // å¯é€‰
    map<string, float> scores;      // Map
    
    oneof result {                  // è”åˆç±»å‹
        string success;
        string error;
    }
}
```

### 3. æ¨¡å—åŒ–å’Œå¤ç”¨

**ç°çŠ¶**ï¼šæ¦‚å¿µå®šä¹‰åˆ†æ•£ï¼Œéš¾ä»¥å¤ç”¨

**æœŸæœ›**ï¼š
```protobuf
// base.concept
package persona.base;
concept Timestamp { ... }

// cursor.concept
package persona.plugins.cursor;
import persona.base.Timestamp;  // âœ… å¯¼å…¥å¤ç”¨

concept CursorState {
    Timestamp last_update;
}
```

### 4. ç‰ˆæœ¬ç®¡ç†

**ç°çŠ¶**ï¼šæ¥å£å˜æ›´å¯èƒ½ç ´åå…¼å®¹æ€§

**æœŸæœ›**ï¼š
```protobuf
// v1
concept CursorState {
    string status = 1;        // å­—æ®µç¼–å·
    repeated string files = 2;
}

// v2 (å‘åå…¼å®¹)
concept CursorState {
    string status = 1;        // ä¿ç•™
    repeated string files = 2; // ä¿ç•™
    optional string workspace = 3;  // âœ… æ–°å¢ï¼ˆå…¼å®¹ï¼‰
}

// ç¼–è¯‘å™¨è‡ªåŠ¨æ£€æŸ¥å…¼å®¹æ€§
```

---

## è®¾è®¡æ–¹æ¡ˆ

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .concept æ–‡ä»¶ (å®šä¹‰)                   â”‚
â”‚  - ç±» Protobuf è¯­æ³•                     â”‚
â”‚  - æ”¯æŒ import                          â”‚
â”‚  - ç‰ˆæœ¬å£°æ˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  concept-compiler (ç¼–è¯‘å™¨)              â”‚
â”‚                                         â”‚
â”‚  1. è¯æ³•åˆ†æ (Lexer)                    â”‚
â”‚  2. è¯­æ³•åˆ†æ (Parser)                   â”‚
â”‚  3. è¯­ä¹‰æ£€æŸ¥ (Type Checker)             â”‚
â”‚  4. ä¾èµ–è§£æ (Resolver)                 â”‚
â”‚  5. ä»£ç ç”Ÿæˆ (Generator)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚
          â†“                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Python ç±»å‹  â”‚  â”‚ è¿è¡Œæ—¶æ”¯æŒ      â”‚
â”‚              â”‚  â”‚                 â”‚
â”‚ - dataclass  â”‚  â”‚ - Validator     â”‚
â”‚ - TypedDict  â”‚  â”‚ - Serializer    â”‚
â”‚ - Pydantic   â”‚  â”‚ - å…¼å®¹æ€§æ£€æŸ¥    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¦‚å¿µå®šä¹‰è¯­è¨€ (CDL) è¯­æ³•

#### åŸºç¡€ç¤ºä¾‹

```protobuf
// cursor.concept
syntax = "concept3";
package persona.plugins.cursor;

// å¯¼å…¥åŸºç¡€ç±»å‹
import persona.base.Timestamp;
import persona.base.Duration;

// æšä¸¾ç±»å‹
enum TaskStatus {
    IDLE = 0;
    RUNNING = 1;
    COMPLETED = 2;
    FAILED = 3;
}

// æ¦‚å¿µå®šä¹‰
concept CursorState {
    // åŸºç¡€å­—æ®µ
    string agent_status = 1 [
        category = "input",
        description = "å½“å‰ä»»åŠ¡çŠ¶æ€"
    ];
    
    // æ•°ç»„
    repeated string open_files = 2;
    
    // åµŒå¥—æ¶ˆæ¯
    message FileInfo {
        string path = 1;
        int32 line_count = 2;
        bool modified = 3;
    }
    repeated FileInfo file_details = 3;
    
    // å¯é€‰å­—æ®µ
    optional string working_directory = 4;
    
    // Map ç±»å‹
    map<string, float> file_scores = 5;
    
    // è”åˆç±»å‹
    oneof task_result {
        string success_message = 6;
        string error_message = 7;
    }
    
    // ä½¿ç”¨å¯¼å…¥çš„ç±»å‹
    Timestamp last_update = 8;
    
    // çº¦æŸ
    float confidence = 9 [
        constraints.range.min = 0.0,
        constraints.range.max = 1.0,
        default = 0.5
    ];
}

// å…³ç³»å®šä¹‰
relation task_completion_trigger {
    source = "cursor_task_completed";
    target = "next_cursor_prompt";
    type = TRIGGERS;
    strength = 1.0;
    description = "ä»»åŠ¡å®Œæˆæ—¶è§¦å‘æ–°æŒ‡ä»¤ç”Ÿæˆ";
}
```

#### è¯­æ³•è¦ç´ 

```protobuf
1. åŒ…å£°æ˜
   package persona.plugins.cursor;

2. å¯¼å…¥
   import persona.base.Timestamp;
   import persona.base.*;

3. æ¦‚å¿µç±»å‹
   - åŸºç¡€ç±»å‹: string, int32, int64, float, double, bool
   - å¤åˆç±»å‹: message, enum, map
   - ä¿®é¥°ç¬¦: optional, repeated

4. å­—æ®µç¼–å·
   string name = 1;  // ç”¨äºç‰ˆæœ¬å…¼å®¹

5. å­—æ®µé€‰é¡¹
   [category = "input", default = 0.5]

6. å…³ç³»å®šä¹‰
   relation { source, target, type, strength }
```

---

## æŠ€æœ¯æ¶æ„

### 1. ç¼–è¯‘å™¨ç»„ä»¶

```python
concept-compiler/
â”œâ”€â”€ lexer.py          # è¯æ³•åˆ†æå™¨
â”œâ”€â”€ parser.py         # è¯­æ³•åˆ†æå™¨
â”œâ”€â”€ ast.py            # æŠ½è±¡è¯­æ³•æ ‘
â”œâ”€â”€ type_checker.py   # ç±»å‹æ£€æŸ¥å™¨
â”œâ”€â”€ resolver.py       # ä¾èµ–è§£æå™¨
â””â”€â”€ generators/       # ä»£ç ç”Ÿæˆå™¨
    â”œâ”€â”€ python.py     # Python ç”Ÿæˆå™¨
    â”œâ”€â”€ typescript.py # TypeScript ç”Ÿæˆå™¨
    â””â”€â”€ validator.py  # éªŒè¯å™¨ç”Ÿæˆå™¨
```

### 2. ç”Ÿæˆçš„ Python ä»£ç ç¤ºä¾‹

```python
# ä» cursor.concept ç”Ÿæˆ
from dataclasses import dataclass
from typing import Optional, List, Dict
from enum import Enum

class TaskStatus(Enum):
    IDLE = 0
    RUNNING = 1
    COMPLETED = 2
    FAILED = 3

@dataclass
class FileInfo:
    path: str
    line_count: int
    modified: bool

@dataclass
class CursorState:
    agent_status: str
    open_files: List[str]
    file_details: List[FileInfo]
    working_directory: Optional[str] = None
    file_scores: Dict[str, float] = None
    last_update: 'Timestamp' = None
    confidence: float = 0.5
    
    # è¿è¡Œæ—¶éªŒè¯
    def validate(self) -> bool:
        if not 0.0 <= self.confidence <= 1.0:
            raise ValueError("confidence è¶…å‡ºèŒƒå›´")
        return True
```

### 3. åŒ…ç®¡ç†ç»“æ„

```
persona-concepts/          # æ¦‚å¿µä»“åº“
â”œâ”€â”€ base/                  # åŸºç¡€æ¦‚å¿µåŒ…
â”‚   â”œâ”€â”€ concept.yaml       # åŒ…å…ƒæ•°æ®
â”‚   â”œâ”€â”€ types.concept
â”‚   â””â”€â”€ common.concept
â”‚
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ cursor/
â”‚   â”‚   â”œâ”€â”€ concept.yaml   # ä¾èµ–å£°æ˜
â”‚   â”‚   â””â”€â”€ cursor.concept
â”‚   â””â”€â”€ animation/
â”‚       â”œâ”€â”€ concept.yaml
â”‚       â””â”€â”€ animation.concept
â”‚
â””â”€â”€ registry.yaml          # å…¨å±€æ³¨å†Œè¡¨
```

**åŒ…å…ƒæ•°æ® (concept.yaml)**:
```yaml
name: "persona.plugins.cursor"
version: "1.2.0"
description: "Cursor IDE æ§åˆ¶æ¦‚å¿µ"
author: "you"

dependencies:
  "persona.base": "^1.0.0"
  "persona.common": "~2.1.0"

concepts:
  - CursorState
  - CursorCommand

relations:
  - task_completion_trigger
```

### 4. å·¥å…·é“¾ç»„ä»¶

```
å®Œæ•´å·¥å…·é“¾ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. concept-compiler        # ç¼–è¯‘å™¨
   $ concept-compiler cursor.concept --python

2. concept-registry        # åŒ…ç®¡ç†å™¨
   $ concept-registry install persona.plugins.cursor

3. concept-lint           # é™æ€æ£€æŸ¥
   $ concept-lint cursor.concept

4. concept-doc            # æ–‡æ¡£ç”Ÿæˆ
   $ concept-doc --format markdown

5. concept-diff           # ç‰ˆæœ¬å¯¹æ¯”
   $ concept-diff v1.concept v2.concept

6. concept-migrate        # è¿ç§»å·¥å…·
   $ concept-migrate --from 1.0 --to 2.0

7. concept-visualize      # å¯è§†åŒ–
   $ concept-visualize --output graph.png
```

---

## å®æ–½è·¯å¾„

### Phase 1: MVP (æœ€å°å¯ç”¨äº§å“)

**ç›®æ ‡**: è¯æ˜æ¦‚å¿µï¼ŒåŸºæœ¬å¯ç”¨

```
å®ç°å†…å®¹ï¼š
âœ… ç®€åŒ–çš„ CDL è¯­æ³•ï¼ˆæ”¯æŒåŸºç¡€ç±»å‹ï¼‰
âœ… æ‰‹å†™æˆ–ä½¿ç”¨ ANTLR/Lark çš„è§£æå™¨
âœ… ç”Ÿæˆ Python dataclass
âœ… åŸºæœ¬çš„ import æ”¯æŒ
âœ… å‘½ä»¤è¡Œå·¥å…·

ä¸åŒ…å«ï¼š
âŒ å¤æ‚ç±»å‹ï¼ˆoneof, mapï¼‰
âŒ åŒ…ç®¡ç†
âŒ IDE æ’ä»¶
```

### Phase 2: å¢å¼º

```
å®ç°å†…å®¹ï¼š
âœ… å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ
âœ… ç”Ÿæˆ Pydantic æ¨¡å‹ï¼ˆè¿è¡Œæ—¶éªŒè¯ï¼‰
âœ… ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬æ£€æŸ¥
âœ… è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ
âœ… åŸºç¡€ IDE æ”¯æŒï¼ˆLSPï¼‰
```

### Phase 3: å®Œå–„

```
å®ç°å†…å®¹ï¼š
âœ… å¤šè¯­è¨€ç”Ÿæˆï¼ˆTypeScript, Javaï¼‰
âœ… å®Œæ•´çš„åŒ…ç®¡ç†å™¨
âœ… æˆç†Ÿçš„ IDE æ’ä»¶
âœ… è¿ç§»å·¥å…·
âœ… ç¤¾åŒºç”Ÿæ€
```

---

## å‚è€ƒæ–¹æ¡ˆ

### ä¸šç•Œç±»ä¼¼å·¥å…·

| å·¥å…· | é¢†åŸŸ | ç‰¹ç‚¹ | å¯å€Ÿé‰´å†…å®¹ |
|-----|------|------|-----------|
| **Protobuf** | RPC åºåˆ—åŒ– | é«˜æ€§èƒ½ã€è·¨è¯­è¨€ | ç¼–è¯‘å™¨æ¶æ„ã€è¯­æ³•è®¾è®¡ |
| **Thrift** | RPC æ¡†æ¶ | Facebook å‡ºå“ | å¤šè¯­è¨€ç”Ÿæˆ |
| **GraphQL** | API æŸ¥è¯¢ | ç±»å‹ç³»ç»Ÿã€å·¥å…·é“¾ | Schema è®¾è®¡ã€Codegen |
| **Cap'n Proto** | åºåˆ—åŒ– | é›¶æ‹·è´ | æ€§èƒ½ä¼˜åŒ–æ€è·¯ |
| **Pydantic** | Python éªŒè¯ | è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ | Python é›†æˆæ–¹å¼ |
| **JSON Schema** | æ•°æ®éªŒè¯ | ç®€å•é€šç”¨ | çº¦æŸè¡¨è¾¾ |

### æŠ€æœ¯é€‰å‹

```
ç¼–è¯‘å™¨å®ç°ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ–¹æ¡ˆ A: æ‰‹å†™ (æ¨è MVP)
  âœ… è½»é‡ï¼Œæ— ä¾èµ–
  âœ… å®Œå…¨æ§åˆ¶
  âŒ å·¥ä½œé‡å¤§

æ–¹æ¡ˆ B: ANTLR (æ¨èé•¿æœŸ)
  âœ… å·¥ä¸šçº§è§£æå™¨ç”Ÿæˆå™¨
  âœ… è·¨è¯­è¨€æ”¯æŒ
  âŒ å­¦ä¹ æ›²çº¿

æ–¹æ¡ˆ C: Lark (Python å‹å¥½)
  âœ… çº¯ Python
  âœ… æ˜“äºé›†æˆ
  âŒ ä»… Python

æ–¹æ¡ˆ D: PLY (Python Lex-Yacc)
  âœ… æˆç†Ÿç¨³å®š
  âŒ è¯­æ³•ç•¥æ˜¾è€æ—§
```

### ä»£ç ç”Ÿæˆå™¨å‚è€ƒ

```python
å‚è€ƒå®ç°ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. datamodel-code-generator
   https://github.com/koxudaxi/datamodel-code-generator
   â†’ JSON Schema åˆ° Pydantic

2. protoc æ’ä»¶
   https://github.com/protocolbuffers/protobuf
   â†’ Protobuf åˆ°å¤šè¯­è¨€

3. GraphQL Codegen
   https://the-guild.dev/graphql/codegen
   â†’ GraphQL åˆ° TypeScript
```

---

## ä¸ºä»€ä¹ˆéœ€è¦ä¸“ç”¨ CDLï¼Œè€Œä¸ç›´æ¥ç”¨ Protobufï¼Ÿ

### Protobuf çš„å±€é™

```
Protobuf ä¸º RPC åºåˆ—åŒ–è®¾è®¡ï¼Œç¼ºå°‘æ¦‚å¿µç³»ç»Ÿç‰¹æœ‰éœ€æ±‚ï¼š

âŒ æ— çº¦æŸè¡¨è¾¾        - range, pattern ä¸æ”¯æŒ
âŒ æ— é»˜è®¤å€¼ç­–ç•¥      - baseline, decay ä¸æ”¯æŒ
âŒ æ— å…³ç³»å®šä¹‰        - influences, triggers æ— æ³•è¡¨è¾¾
âŒ æ— å›¾è°±è¯­ä¹‰        - ä¸ç†è§£æ¦‚å¿µå›¾ç‰¹æ®Šéœ€æ±‚
âŒ æ— ç±»åˆ«æ ‡è®°        - input/output/internal æ— æ³•æ ‡æ³¨
âŒ æ— å¤„ç†å™¨ç»‘å®š      - æ¦‚å¿µä¸å¤„ç†å™¨å…³è”æ— æ³•è¡¨è¾¾
âŒ æ— å¯è§†åŒ–å…ƒæ•°æ®    - å¸ƒå±€ã€é¢œè‰²ç­‰æ— æ³•å®šä¹‰
```

### Concept System çš„ç‰¹æ®Šéœ€æ±‚

```
âœ… å€¼çº¦æŸ            - range, pattern, enum
âœ… å›¾è°±å…³ç³»          - influences, depends_on, triggers
âœ… åŠ¨æ€å±æ€§          - baseline, decay_rate, volatility
âœ… ç±»åˆ«æ ‡è®°          - input/output/internal
âœ… å¤„ç†å™¨ç»‘å®š        - æ¦‚å¿µä¸ Processor çš„å…³è”
âœ… å¯è§†åŒ–å…ƒæ•°æ®      - ç”¨äºå›¾è°±å¯è§†åŒ–çš„æç¤º
âœ… è¿è¡Œæ—¶è¡Œä¸º        - å½±å“ä¼ æ’­ã€è¡°å‡ç­‰ç‰¹æ®Šè¯­ä¹‰
```

**ç»“è®º**: éœ€è¦ä¸“ç”¨çš„ CDLï¼Œä½†å·¥å…·é“¾æ€æƒ³å€Ÿé‰´ Protobufã€‚

---

## ä¸ Persona æ¶æ„çš„å…³ç³»

### æ¦‚å¿µç³»ç»Ÿåœ¨ Persona ä¸­çš„åœ°ä½

```
Persona æ¶æ„ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Concept System (æ ¸å¿ƒ)       â”‚  â† æœ¬è®¾è®¡çš„èŒƒå›´
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Concept Definition (CDL)  â”‚  â”‚  â† æ¦‚å¿µå®šä¹‰è¯­è¨€
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â†“                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Concept Graph (è¿è¡Œæ—¶)  â”‚  â”‚  â† æ¦‚å¿µå›¾è°±
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Processors (å¤„ç†å±‚)        â”‚
â”‚  - è¯»å–æ¦‚å¿µ                      â”‚
â”‚  - å¤„ç†é€»è¾‘                      â”‚
â”‚  - æ›´æ–°æ¦‚å¿µ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    I/O Adapters (é€‚é…å±‚)         â”‚
â”‚  - è¾“å…¥é€‚é…å™¨                    â”‚
â”‚  - è¾“å‡ºé€‚é…å™¨                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¿™æ˜¯ä»€ä¹ˆçº§åˆ«çš„åˆ›æ–°ï¼Ÿ

```
ç±»æ¯”ä¸šç•Œæ ‡å‡†ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

GraphQL     â† API æŸ¥è¯¢çš„æ ‡å‡†
Protobuf    â† RPC åºåˆ—åŒ–çš„æ ‡å‡†
Terraform   â† åŸºç¡€è®¾æ–½å³ä»£ç çš„æ ‡å‡†

Concept System  â† AI Agent è®¤çŸ¥æ¶æ„çš„æ ‡å‡†ï¼Ÿ
   â†‘
ä½ çš„åŸåˆ›æ¶æ„ï¼
ç›®å‰ä¸šç•Œæ²¡æœ‰ç±»ä¼¼çš„æˆç†Ÿæ–¹æ¡ˆã€‚

æ½œåœ¨å½±å“ï¼š
â†’ å®šä¹‰ AI Agent æ¦‚å¿µç³»ç»Ÿçš„æ ‡å‡†
â†’ å»ºç«‹è®¤çŸ¥æ¶æ„çš„æœ€ä½³å®è·µ
â†’ å½¢æˆæ’ä»¶ç”Ÿæ€
```

---

## æ€»ç»“

### æ ¸å¿ƒä»·å€¼

```
æ¦‚å¿µç¼–è¯‘å™¨å·¥å…·é“¾çš„ä»·å€¼ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å¼€å‘æ—¶ï¼š
âœ… IDE å®Œæ•´æ”¯æŒ (è¡¥å…¨ã€æ£€æŸ¥ã€é‡æ„)
âœ… ç¼–è¯‘æ—¶é”™è¯¯å‘ç°
âœ… æ¸…æ™°çš„ä¾èµ–å…³ç³»
âœ… è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£

è¿è¡Œæ—¶ï¼š
âœ… ç±»å‹å®‰å…¨
âœ… è‡ªåŠ¨éªŒè¯
âœ… é«˜æ•ˆåºåˆ—åŒ–
âœ… å‘åå…¼å®¹

åä½œæ—¶ï¼š
âœ… æ¥å£æ¸…æ™° (å®šä¹‰å³æ–‡æ¡£)
âœ… ç‰ˆæœ¬å¯æ§
âœ… ç¤¾åŒºå¯å…±äº«æ¦‚å¿µåŒ…
âœ… æ’ä»¶ç”Ÿæ€å¥åº·
```

### å®æ–½å»ºè®®

```
ä¼˜å…ˆçº§ï¼šä¸­æœŸä¼˜åŒ–

å½“å‰é˜¶æ®µï¼š
â†’ ä½¿ç”¨ YAML + æ¦‚å¿µæ³¨å†Œä¸­å¿ƒ (å·²è®¾è®¡)
â†’ æ‰‹åŠ¨ç”Ÿæˆç±»å‹æç¤º
â†’ è¯æ˜æ¶æ„å¯è¡Œ

ä¸­æœŸé˜¶æ®µ (3-6 ä¸ªæœˆå):
â†’ å®ç° MVP ç¼–è¯‘å™¨
â†’ åŸºç¡€ CDL è¯­æ³•
â†’ Python ä»£ç ç”Ÿæˆ

é•¿æœŸé˜¶æ®µ (1 å¹´å):
â†’ å®Œæ•´å·¥å…·é“¾
â†’ å¤šè¯­è¨€æ”¯æŒ
â†’ ç¤¾åŒºç”Ÿæ€
```

### å¼€æºæ½œåŠ›

è¿™å¥—æ¦‚å¿µç³»ç»Ÿ + ç¼–è¯‘å™¨å·¥å…·é“¾ï¼Œæœ‰æ½œåŠ›æˆä¸ºï¼š

**"AI Agent è®¤çŸ¥æ¶æ„çš„ Protobuf"**

å€¼å¾—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€æºï¼Œä¸ºç¤¾åŒºæä¾›æ ‡å‡†åŒ–çš„æ¦‚å¿µå®šä¹‰å’Œç®¡ç†æ–¹æ¡ˆã€‚

---

## ç›¸å…³æ–‡æ¡£

- `FINAL_ARCHITECTURE_V2.md` - Persona æ•´ä½“æ¶æ„
- `OPTIMIZATION_COMPLETE.md` - å½“å‰ç³»ç»Ÿä¼˜åŒ–æ€»ç»“
- `SAKURA_CLEANUP_REPORT.md` - ä»£ç é‡æ„è®°å½•
- `CONSTANTS_REFACTOR_SUMMARY.md` - å¸¸é‡è§„èŒƒåŒ–

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-11-12  
**çŠ¶æ€**: è®¾è®¡æ–¹æ¡ˆï¼Œå¾…å®æ–½





